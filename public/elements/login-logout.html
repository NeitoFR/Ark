<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<dom-module id="login-logout">
    <template>
        <style>
            :host {
                margin: 0;
                padding: 0;
            }
            paper-button {
                color: #fff;
            }
            paper-button.link {
                color: #fff;
                display: inline-block;
                font-size: 13px;
            }
            paper-button.indigo {
                background-color: var(--paper-indigo-500);
                color: white;
                --paper-button-raised-keyboard-focus: {
                    background-color: var(--paper-pink-a200) !important;
                    color: white !important;
                };
            }
            paper-button.indigo:hover {
                background-color: var(--paper-indigo-400);
            }
        </style>
        <brum-global-variable key="userData" value="{{storedUser}}"></brum-global-variable>
        
        
        <template is="dom-if" if="{{!storedUser.loggedin}}">
            <a href="/register-login">Log in</a>
        </template>
        <template is="dom-if" if="{{storedUser.loggedin}}">
            <paper-button raised class="indigo" on-tap="logout">Log Out ([[storedUser.username]])</paper-button>
        </template>
        <!--<paper-button raised class="indigo" on-tap="_testButton">Test Button</paper-button>-->
    </template>
    
    <script>
        (function() {
            class LoginLogout extends Polymer.Element {
                static get is() {
                    return 'login-logout';
                }
                static get properties() {
                    return {
                        link: {
                            type: Boolean,
                            value: false
                        }
                    }
                }
                _testButton(evt){
                    console.log(this.storedUser);
                }
                logout() {
                    window.location.replace("/");
                    this.storedUser = null;
                }
            }
            
            window.customElements.define(LoginLogout.is, LoginLogout);
        }());
    </script>
</dom-module>